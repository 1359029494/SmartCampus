<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title></title>
		<link href="../css/mui.min.css" rel="stylesheet" />
		<link href="../css/star.css" rel="stylesheet" />
	</head>

	<body>
		<header class="mui-bar mui-bar-nav">
			<h1 class="mui-title">维修评分</h1>
		</header>
		<div class="mui-content">
			<ul class="mui-table-view">
				<li id="repair" class="star-li">
					<a>维修情况</a>
					<div class="icons">
						<i data-index="1" class="mui-icon mui-icon-star"></i>
						<i data-index="2" class="mui-icon mui-icon-star"></i>
						<i data-index="3" class="mui-icon mui-icon-star"></i>
						<i data-index="4" class="mui-icon mui-icon-star"></i>
						<i data-index="5" class="mui-icon mui-icon-star"></i>
					</div>
				</li>
				<li id="service" class="star-li">
					<a>服务态度</a>
					<div class="icons">
						<i data-index="1" class="mui-icon mui-icon-star"></i>
						<i data-index="2" class="mui-icon mui-icon-star"></i>
						<i data-index="3" class="mui-icon mui-icon-star"></i>
						<i data-index="4" class="mui-icon mui-icon-star"></i>
						<i data-index="5" class="mui-icon mui-icon-star"></i>
					</div>
				</li>
			</ul>
			<div class="mui-input-row" style="margin: 10px 5px; ">
				<textarea id="textarea" rows="4" placeholder="输入您的评价" class="mui-input-speech mui-input-clear"></textarea>
			</div>
			<div id="info"></div>
		</div>
		<button style="width: 150px;float: right;" type="button" class="mui-btn mui-btn-warning" data-loading-text="提交中">提交</button>
		<script src="../js/mui.min.js"></script>
		<script type="text/javascript" charset="utf-8">
			mui.init();
			mui('.mui-input-row textarea').input();
			mui('.icons').on('click', 'i', function() {
				var index = parseInt(this.getAttribute("data-index")); //获取当前元素的索引值
				var parent = this.parentNode; //获取当前元素的父节点
				var children = parent.children; //获取父节点下所有子元素
				if (this.classList.contains("mui-icon-star")) { //判断当前节点列表中是否含有.mui-icon-star元素
					for (var i = 0; i < index; i++) { //亮星
						children[i].classList.remove('mui-icon-star');
						children[i].classList.add('mui-icon-star-filled');
					}
					//alert(this.getAttribute("data-index"))
				} else { //重置已经亮星的元素
					for (var i = index; i < 5; i++) {
						children[i].classList.add('mui-icon-star')
						children[i].classList.remove('mui-icon-star-filled')
					}
				}
				//alert(index)
				//alert(parent.getAttribute("id"))
				if (index > 3) {
					var str = index + "星好评";
				} else if (index == 3) {
					var str = "一般般";
				} else if (index < 3) {
					var str = index + "星差评";
				}
				document.getElementById("info").innerHTML = parent.previousElementSibling.innerText + str;
			})
		</script>
	</body>

</html>
